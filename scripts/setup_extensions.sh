#!/bin/bash

# Complete extension setup script
# Recreates extension folders and provides Xcode setup instructions

set -e

echo "ğŸ”§ Extension Setup Script"
echo "========================="
echo ""

# Create directories
echo "ğŸ“ Creating extension directories..."
mkdir -p ShareExtension
mkdir -p MessageExtension
echo "   âœ… Created ShareExtension/"
echo "   âœ… Created MessageExtension/"

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“ NEXT STEPS: Add Extensions in Xcode"
echo ""
echo "Since Xcode doesn't support adding targets via command line,"
echo "you need to add them manually in Xcode:"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "1ï¸âƒ£  REMOVE OLD TARGETS (if they still exist)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "   a. Open Xcode project"
echo "   b. Project Navigator â†’ Find 'ShareExtension' and 'MessageExtension' targets"
echo "   c. Right-click each â†’ Delete â†’ Move to Trash"
echo "   d. Select main app target â†’ General â†’ Remove embedded .appex files"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "2ï¸âƒ£  ADD SHARE EXTENSION"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "   File â†’ New â†’ Target â†’ iOS â†’ Share Extension"
echo ""
echo "   Configuration:"
echo "   â€¢ Product Name: ShareExtension"
echo "   â€¢ Bundle ID: com.khandoba.securedocs.ShareExtension"
echo "   â€¢ Language: Swift"
echo "   â€¢ Include UI Extension: âœ…"
echo ""
echo "   After creation:"
echo "   â€¢ Replace generated files with files from ShareExtension/ folder"
echo "   â€¢ Configure Info.plist (see docs/EXTENSION_IMPLEMENTATION_GUIDE.md)"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "3ï¸âƒ£  ADD MESSAGE EXTENSION"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "   File â†’ New â†’ Target â†’ iOS â†’ iMessage Extension"
echo ""
echo "   Configuration:"
echo "   â€¢ Product Name: MessageExtension"
echo "   â€¢ Bundle ID: com.khandoba.securedocs.MessageExtension"
echo "   â€¢ Language: Swift"
echo "   â€¢ Include UI Extension: âœ…"
echo ""
echo "   After creation:"
echo "   â€¢ Replace generated files with files from MessageExtension/ folder"
echo "   â€¢ Configure Info.plist (see docs/EXTENSION_IMPLEMENTATION_GUIDE.md)"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ğŸ“š Full guide: docs/EXTENSION_IMPLEMENTATION_GUIDE.md"
echo ""
echo "âœ… Extension directories ready"
echo ""

